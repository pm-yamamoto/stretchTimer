<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>最シンプルボタンテスト</title>
</head>
<body style="font-family: Arial; padding: 20px; background: #f0f0f0;">
    
    <h1 style="text-align: center; color: #333;">iPhone実機ボタンテスト</h1>
    
    <div style="text-align: center; background: yellow; padding: 10px; margin: 20px 0;">
        <strong>ngrok URL:</strong> <span id="currentUrl"></span><br>
        <strong>時刻:</strong> <span id="currentTime"></span>
    </div>
    
    <!-- 最もシンプルなボタン1 -->
    <button onclick="alert('ボタン1が押されました!')" 
            style="width: 100%; height: 80px; font-size: 24px; background: red; color: white; border: none; margin: 10px 0; border-radius: 5px;">
        赤いボタン (onclick)
    </button>
    
    <!-- 最もシンプルなボタン2 -->
    <button onclick="buttonClick(2)" 
            style="width: 100%; height: 80px; font-size: 24px; background: blue; color: white; border: none; margin: 10px 0; border-radius: 5px;">
        青いボタン (関数呼び出し)
    </button>
    
    <!-- Aタグボタン -->
    <a href="javascript:buttonClick(3)" 
       style="display: block; width: 100%; height: 80px; line-height: 80px; font-size: 24px; background: green; color: white; text-decoration: none; margin: 10px 0; border-radius: 5px; text-align: center;">
        緑のAタグボタン
    </a>
    
    <!-- フォームボタン -->
    <form onsubmit="buttonClick(4); return false;" style="margin: 10px 0;">
        <input type="submit" value="紫のフォームボタン" 
               style="width: 100%; height: 80px; font-size: 24px; background: purple; color: white; border: none; border-radius: 5px;">
    </form>
    
    <!-- JavaScript addEventListener ボタン -->
    <button id="jsButton" 
            style="width: 100%; height: 80px; font-size: 24px; background: orange; color: white; border: none; margin: 10px 0; border-radius: 5px;">
        オレンジJSボタン (addEventListener)
    </button>
    
    <!-- タッチ専用ボタン -->
    <div id="touchDiv"
         style="width: 100%; height: 80px; line-height: 80px; font-size: 24px; background: brown; color: white; margin: 10px 0; border-radius: 5px; text-align: center; cursor: pointer;">
        茶色DIVボタン (タッチ専用)
    </div>
    
    <!-- 結果表示 -->
    <div id="results" style="background: white; padding: 20px; margin: 20px 0; border-radius: 5px;">
        <h3>テスト結果:</h3>
        <div id="resultList">まだテストされていません</div>
    </div>
    
    <!-- デバッグ情報 -->
    <div style="background: #e0e0e0; padding: 15px; margin: 20px 0; font-size: 12px; border-radius: 5px;">
        <strong>デバッグ情報:</strong><br>
        <div id="debugInfo">読み込み中...</div>
    </div>

    <script>
        let testResults = [];
        
        function buttonClick(buttonNum) {
            const timestamp = new Date().toLocaleTimeString();
            const result = `ボタン${buttonNum}が正常に動作 (${timestamp})`;
            
            testResults.push(result);
            updateResults();
            
            console.log(result);
            
            // 画面の色を一瞬変える
            const originalBg = document.body.style.background;
            document.body.style.background = '#90EE90';
            setTimeout(() => {
                document.body.style.background = originalBg;
            }, 300);
        }
        
        function updateResults() {
            const resultList = document.getElementById('resultList');
            if (testResults.length === 0) {
                resultList.innerHTML = 'まだテストされていません';
            } else {
                resultList.innerHTML = testResults.map((result, index) => 
                    `<div style="color: green; margin: 5px 0;">✓ ${result}</div>`
                ).join('');
            }
        }
        
        function updateDebugInfo() {
            const debugInfo = document.getElementById('debugInfo');
            debugInfo.innerHTML = `
                User Agent: ${navigator.userAgent}<br>
                画面サイズ: ${window.innerWidth}x${window.innerHeight}<br>
                タッチサポート: ${'ontouchstart' in window}<br>
                現在時刻: ${new Date().toLocaleString()}<br>
                プロトコル: ${location.protocol}<br>
                ホスト: ${location.host}
            `;
        }
        
        function updateTime() {
            document.getElementById('currentTime').textContent = new Date().toLocaleTimeString();
            document.getElementById('currentUrl').textContent = location.href;
        }
        
        // JavaScript イベントリスナー設定
        document.addEventListener('DOMContentLoaded', function() {
            updateDebugInfo();
            updateTime();
            setInterval(updateTime, 1000);
            
            // JavaScript addEventListener テスト
            const jsButton = document.getElementById('jsButton');
            jsButton.addEventListener('click', function() {
                buttonClick(5);
            });
            
            // タッチイベントテスト
            const touchDiv = document.getElementById('touchDiv');
            
            let touchStartTime = 0;
            
            touchDiv.addEventListener('touchstart', function(e) {
                touchStartTime = Date.now();
                this.style.background = '#8B4513';
            });
            
            touchDiv.addEventListener('touchend', function(e) {
                const duration = Date.now() - touchStartTime;
                this.style.background = 'brown';
                
                if (duration < 1000) {
                    e.preventDefault();
                    buttonClick(6);
                }
            });
            
            // 全体のタッチ監視
            document.addEventListener('touchstart', function(e) {
                console.log('Document touchstart:', e.touches.length);
            });
            
            document.addEventListener('touchend', function(e) {
                console.log('Document touchend:', e.changedTouches.length);
            });
        });
        
        console.log('=== 最シンプルテストページ読み込み完了 ===');
        console.log('ngrok URL:', location.href);
    </script>
</body>
</html>